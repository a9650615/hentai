
var exports = module.exports = {};

var data = {};

exports.openView = function ( da ){
	data.data = da;
	if(!data.window){
		
	}else{
	  //console.log('has opened');
	  // data.window.window.$ = global.$;
	  //data.window.window.data = da;
	}
	data.window = gui.Window.open('views/viewer.html',{
		focus: true,
		min_width: 800,
		min_height: 700,
		toolbar: false
	});

	data.window.on('close', function() {
	  this.hide(); // Pretend to be closed already
	  console.log("We're closing...");
	  this.close(true);
	  data.window = null;
	});

	data.window.on ('loaded', function(){
	  //var document = data.window.window.document;
	  var win = global.gui.Window.get(data.window);
	  data.window.eval(null,'data ='+JSON.stringify(data)+';Viewer.init();');
	});

	data.window.on('customEvent', function(e){
		console.log(e);
	});
}